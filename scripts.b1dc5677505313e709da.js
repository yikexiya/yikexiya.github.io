!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";if(void 0===t)throw new Error("Geetest requires browser environment");var n=t.document,o=t.Math,r=n.getElementsByTagName("head")[0];function i(t){this._obj=t}function a(t){var e=this;new i(t)._each(function(t,n){e[t]=n})}i.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return c(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(t){var e=this;new i(t)._each(function(t,n){e[t]=n})}};var c=function(t){return"string"==typeof t},s={},f={},u=function(t,e,o,a,s){var f=function(u){!function(t,e){var o=n.createElement("script");o.charset="UTF-8",o.async=!0,o.onerror=function(){e(!0)};var i=!1;o.onload=o.onreadystatechange=function(){i||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(i=!0,setTimeout(function(){e(!1)},0))},o.src=t,r.appendChild(o)}(function(t,e,n,o){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var r=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(n)+function(t){if(!t)return"";var e="?";return new i(t)._each(function(t,n){(c(n)||function(t){return"number"==typeof t}(n)||function(t){return"boolean"==typeof t}(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")}(o);return e&&(r=t+e+r),r}(t,e[u],o,a),function(t){t?u>=e.length-1?s(!0):f(u+1):s(!1)})};f(0)},l=function(t,e){var n={networkError:"\u7f51\u7edc\u9519\u8bef"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};t.Geetest&&(f.slide="loaded");var p=function(e,n){var r=new a(e);e.https?r.protocol="https://":e.protocol||(r.protocol=t.location.protocol+"//"),function(e,n,r,i){if("object"==typeof(a=r.getLib)&&null!==a)return r._extend(r.getLib),void i(r);var a;if(r.offline)i(r._get_fallback_config());else{var c="geetest_"+(parseInt(1e4*o.random())+(new Date).valueOf());t[c]=function(e){i("success"===e.status?e.data:e.status?r._get_fallback_config():e),t[c]=void 0;try{delete t[c]}catch(n){}},u(r.protocol,e,n,{gt:r.gt,callback:c},function(t){t&&i(r._get_fallback_config())})}}([r.api_server||r.apiserver],r.type_path,r,function(e){var o=e.type,i=function(){r._extend(e),n(new t.Geetest(r))};s[o]=s[o]||[];var a=f[o]||"init";"init"===a?(f[o]="loading",s[o].push(i),u(r.protocol,e.static_servers||e.domains,e[o]||e.path,null,function(t){if(t)f[o]="fail",l("networkError",r);else{f[o]="loaded";for(var e=s[o],n=0,i=e.length;n<i;n+=1){var a=e[n];"function"==typeof a&&a()}s[o]=[]}})):"loaded"===a?i():"fail"===a?l("networkError",r):"loading"===a&&s[o].push(i)})};return t.initGeetest=p,p});